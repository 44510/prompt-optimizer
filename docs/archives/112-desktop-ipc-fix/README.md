## 📝 归档说明

- **任务名称**: Desktop IPC 修复与架构分析
- **完成日期**: 2025-07-03
- **核心问题**: Desktop 版本中 `BuiltinTemplateLanguageSwitch` 组件因服务未初始化和方法不存在而出错。
- **根本原因**:
  1. **架构差异**: Web（单进程）可直接调用服务实例，而 Desktop（多进程）必须通过 IPC。
  2. **契约缺失**: `ITemplateManager` 接口中缺少语言切换相关方法，导致代理类无法转发调用。
- **解决方案**:
  1. 在 `ITemplateManager` 接口中补充缺失的方法定义。
  2. 修正 `ElectronTemplateManagerProxy`，使其通过 IPC 正确转发调用，并缓存同步方法的结果。
  3. 在 `preload.js` 和 `main.js` 中添加完整的 IPC 通信链路。
- **经验总结**:
  - **接口驱动开发**: 所有跨模块、跨进程的调用都应依赖于接口（契约），而不是具体实现。
  - **代理模式规范**: IPC 代理类应严格遵守接口，只做转发，不实现业务逻辑。
  - **环境差异处理**: 必须充分考虑 Web 和 Desktop 环境的架构差异（单/多进程），避免依赖特定环境的"捷径"。

---

[原始 experience.md 内容保留在此，或进行精简] 