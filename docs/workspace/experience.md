# 开发经验记录

记录开发过程中的重要经验和最佳实践。

## 🔧 技术经验

### 架构设计
- 存储键的两种用途需要明确映射关系 - 数据导出不完整问题 - 2025-01-08
- 统一PreferenceService管理用户偏好比分散管理更优 - 架构一致性需求 - 2025-01-08
- 过度设计的配置选项应该及时移除 - TemplateManager storageKey从未使用 - 2025-01-08
- 服务接口应保持一致性模式 - PreferenceService需要getAll()批量接口 - 2025-01-08
- 避免过度设计的动态注册机制 - 固定服务直接构造函数注入更简单 - 2025-01-08
- 重构前要全面了解现有实现 - 避免重复造轮子和重复实现 - 2025-01-08
- 消除重复定义提高维护性 - 统一存储键到单一数据源 - 2025-01-08

### 错误处理
- 存储键前缀导致数据查找失败 - DataManager需要区分存储方式 - 检查导出JSON完整性 - 2025-01-08
- 工厂函数参数变更影响范围广 - 系统性查找所有调用点 - 运行测试验证 - 2025-01-08
- 接口变更导致破坏性更新 - 字符串接口改为对象接口 - 保持现有接口签名不变 - 2025-01-08

### 性能优化
- 统一存储方式减少特殊情况处理 - 简化DataManager逻辑 - 提高代码可维护性 - 2025-01-08
- 批量接口比逐个获取更高效 - PreferenceService.getAll()替代多次get() - 减少异步调用次数 - 2025-01-08

### 测试实践
- API变更需要同步更新测试文件 - 构造函数参数变更 - 使用mock验证新API - 2025-01-08

## 🛠️ 工具配置

### 开发工具
- [工具名称] - [配置要点] - [使用技巧] - [记录日期]

### 调试技巧
- [问题类型] - [调试方法] - [工具使用] - [记录日期]

## 📚 学习资源

### 有用文档
- [文档标题] - [链接] - [要点总结] - [记录日期]

### 代码示例
- [功能描述] - [代码片段或文件位置] - [使用场景] - [记录日期]

## 🚫 避坑指南

### 常见错误
- 存储键魔法字符串导致不一致 - 多处硬编码相同字符串 - 使用常量集中管理 - 2025-01-08
- 忽略PreferenceService前缀机制 - 直接查找逻辑键名失败 - 了解存储抽象层实现 - 2025-01-08

### 设计陷阱
- 为了灵活性添加不必要的配置 - 增加代码复杂性但无实际价值 - 优先简洁设计，按需扩展 - 2025-01-08
- 不同类型数据使用不同存储方式 - 增加DataManager复杂性 - 统一相同类型数据的处理方式 - 2025-01-08
- 动态注册机制的过度设计 - 增加复杂性但无实际需求 - 固定依赖直接注入更简单可靠 - 2025-01-08

## 💡 最佳实践

### 接口向后兼容性
**适用场景**: 修改现有接口时
**具体做法**:
- 保持现有接口签名不变
- 内部可以使用新的数据结构，但对外接口保持一致
- 如需变更，先标记为deprecated，再逐步迁移
**效果**: 避免破坏性更新，保护现有调用代码
**注意事项**: 特别注意字符串vs对象等类型变更

## 🔄 流程改进

### 工作流优化
- [改进点] - [改进方法] - [效果评估] - [记录日期]

### 文档管理
- [管理经验] - [工具使用] - [效率提升] - [记录日期]

---

## 📝 使用说明

1. **及时记录** - 遇到重要经验立即记录
2. **分类整理** - 按照上述分类组织内容
3. **定期回顾** - 每周回顾一次，提取可复用经验
4. **归档整理** - 任务完成时将相关经验归档到archives
